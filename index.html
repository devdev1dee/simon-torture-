<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Simon POV Toss</title>
    <style>
        body { margin: 0; background: #050505; color: white; font-family: 'Courier New', Courier, monospace; overflow: hidden; text-align: center; }
        canvas { background: linear-gradient(#111, #333); display: block; margin: 0 auto; cursor: crosshair; }
        #ui { position: absolute; top: 20px; width: 100%; pointer-events: none; text-shadow: 2px 2px black; }
        .splat { position: absolute; pointer-events: none; transform: translate(-50%, -50%); }
    </style>
</head>
<body>

    <div id="ui">
        <h1 id="status">CLICK TO PELT SIMON</h1>
        <p>HITS: <span id="score">0</span> / 10</p>
    </div>

    <canvas id="gameCanvas"></canvas>

    <script>
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const scoreEl = document.getElementById('score');
        const statusEl = document.getElementById('status');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let score = 0;
        let level = 1;
        let tomatoes = [];
        let splats = [];

        const simon = {
            x: canvas.width / 2,
            y: canvas.height / 2,
            width: 80,
            height: 120,
            targetY: canvas.height / 2,
            speed: 4,
            angle: 0
        };

        class Tomato {
            constructor(targetX, targetY) {
                this.startX = canvas.width / 2; // Starts from your "hand"
                this.startY = canvas.height + 50;
                this.x = this.startX;
                this.y = this.startY;
                this.targetX = targetX;
                this.targetY = targetY;
                this.size = 60; // Start big (close to you)
                this.progress = 0;
                this.speed = 0.03; // Flight speed
                this.active = true;
            }

            draw() {
                ctx.beginPath();
                ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
                ctx.fillStyle = "#ff2200";
                ctx.fill();
                // Highlight for 3D look
                ctx.beginPath();
                ctx.arc(this.x - this.size/3, this.y - this.size/3, this.size/4, 0, Math.PI * 2);
                ctx.fillStyle = "rgba(255,255,255,0.3)";
                ctx.fill();
            }

            update() {
                this.progress += this.speed;
                // Linear interpolation for "3D" movement
                this.x = this.startX + (this.targetX - this.startX) * this.progress;
                this.y = this.startY + (this.targetY - this.startY) * this.progress;
                this.size = 60 * (1 - this.progress); // Shrinks as it goes away

                if (this.progress >= 1) {
                    this.active = false;
                    checkHit(this.targetX, this.targetY);
                }
            }
        }

        function checkHit(x, y) {
            let hit = false;
            if (x > simon.x - simon.width/2 && x < simon.x + simon.width/2 &&
                y > simon.y - simon.height/2 && y < simon.y + simon.height/2) {
                hit = true;
            }

            if (hit) {
                score++;
                scoreEl.innerText = score;
                createSplat(x, y);
                if (score >= 10 && level === 1) startLevel2();
            }
        }

        function createSplat(x, y) {
            splats.push({x: x, y: y, size: 40 + Math.random()*20, life: 100});
        }

        function startLevel2() {
            level = 2;
            statusEl.innerText = "LEVEL 2: HE'S PINNED. KEEP THROWING.";
            simon.speed = 0;
        }

        canvas.addEventListener('mousedown', (e) => {
            tomatoes.push(new Tomato(e.clientX, e.clientY));
        });

        function drawSimon() {
            ctx.save();
            ctx.translate(simon.x, simon.y);
            
            // Draw The Cross in Level 2
            if (level === 2) {
                ctx.fillStyle = "#4a2c1a";
                ctx.fillRect(-10, -100, 20, 200); // vertical
                ctx.fillRect(-60, -40, 120, 20); // horizontal
                // Crying
                ctx.fillStyle = "#00ffff";
                ctx.font = "20px Arial";
                ctx.fillText("T_T", -15, -10);
            }

            // Simon Placeholder (Draw a creepy hoodie figure)
            ctx.fillStyle = (level === 2) ? "#222" : "#444";
            ctx.fillRect(-simon.width/2, -simon.height/2, simon.width, simon.height);
            // Face/Hood
            ctx.fillStyle = "#000";
            ctx.fillRect(-simon.width/4, -simon.height/2 + 10, simon.width/2, 30);
            
            ctx.restore();
        }

        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Move Simon in Level 1
            if (level === 1) {
                simon.angle += 0.05;
                simon.x = (canvas.width / 2) + Math.sin(simon.angle) * (canvas.width / 3);
            }

            drawSimon();

            // Handle Splats
            splats.forEach((s, i) => {
                ctx.fillStyle = `rgba(200, 0, 0, ${s.life / 100})`;
                ctx.beginPath();
                ctx.arc(s.x, s.y, s.size, 0, Math.PI*2);
                ctx.fill();
                s.life--;
                if (s.life <= 0) splats.splice(i, 1);
            });

            // Handle Tomatoes
            tomatoes.forEach((t, i) => {
                t.draw();
                t.update();
                if (!t.active) tomatoes.splice(i, 1);
            });

            requestAnimationFrame(update);
        }

        update();

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        });
    </script>
</body>
</html>
